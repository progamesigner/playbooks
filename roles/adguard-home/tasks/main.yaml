- name: Start AdGuard Home container
  shell: |
    _=$(docker container inspect adguard-home &>/dev/null)

    if [ $? -eq 0 ]; then
      docker container stop adguard-home
      docker container rm -v adguard-home
    fi

    docker container run \
      --detach \
      --env TZ="{{ system_timezone }}" \
      --init \
      --name adguard-home \
      --network host \
      --restart unless-stopped \
      --volume /srv/adguard-data:/opt/adguardhome/work \
      --volume /srv/adguard-conf:/opt/adguardhome/conf \
      adguard/adguardhome:arm64-v0.100.9
